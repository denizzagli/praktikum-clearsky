{% extends "base.html" %}

{% block title %}{{ instance_id }} - ClearSky{% endblock %}

{% block content %}
<h1 class="text-center text-blue-600 text-4xl font-bold">ClearSky</h1>
<p class="text-center text-gray-500 italic text-xl mt-2">
    Real-Time Weather and Air Quality Visualization
</p>

<p class="instance-id">Instance ID: <strong>{{ instance_id }}</strong></p>

<!-- Show Locations -->
<div class="container mt-5">
    <h2 class="text-center text-blue-600 text-2xl font-semibold mt-4">City Geocoding</h2>
    <p class="mt-3 text-center text-gray-500 text-l">The selected starting and destination locations for the respective
        instance are displayed on the map below.</p>

    <div class="mt-4 row justify-content-center">
        <div class="col-md-8">

            <!-- Map Results -->
            <div class="row mt-5">
                <div class="col-md-6">
                    <h5 id="start-title" class="map-title" style="display: none;">Starting Location</h5>
                    <div id="start-result" class="alert alert-info" style="display: none;"></div>
                    <div id="map-start" style="height: 300px; width: 100%;"></div>
                </div>
                <div class="col-md-6">
                    <h5 id="dest-title" class="map-title" style="display: none;">Destination Location</h5>
                    <div id="end-result" class="alert alert-info" style="display: none;"></div>
                    <div id="map-dest" style="height: 300px; width: 100%;"></div>
                </div>
            </div>

        </div>
    </div>

</div>

<div class="container mt-5">
    <h2 class="text-center text-blue-600 text-2xl font-semibold mt-4">Weather Parameter Visualization</h2>
    <p class="mt-3 text-center text-gray-500 text-l">This graph represents the changes in the selected weather parameter
        over time for both the source and destination locations. The red line indicates the values recorded at the
        source, while the blue line corresponds to the destination measurements. The x-axis represents the time, and the
        y-axis represents the measurement values of the chosen weather parameter. The visualization helps compare
        weather variations between two locations.</p>

    <div class="container mt-5">
        <div class="row">
            <!-- Weather Impaction Table -->
            <div class="col-md-6">
                <h2 class="text-center text-blue-600 text-xl font-semibold">Weather Impaction</h2>
                <table class="table table-bordered text-center table-sm">
                    <thead>
                    <tr>
                        <th>Parameter</th>
                        <th>Source</th>
                        <th>Destination</th>
                    </tr>
                    </thead>
                    <tbody id="weather-impaction-table">
                    <tr>
                        <td>Temperature</td>
                        <td id="weather-source-temperature"></td>
                        <td id="weather-destination-temperature"></td>
                    </tr>
                    <tr>
                        <td>Precipitation</td>
                        <td id="weather-source-precipitation"></td>
                        <td id="weather-destination-precipitation"></td>
                    </tr>
                    <tr>
                        <td>Humidity</td>
                        <td id="weather-source-humidity"></td>
                        <td id="weather-destination-humidity"></td>
                    </tr>
                    <tr>
                        <td>Wind Speed</td>
                        <td id="weather-source-wind_speed"></td>
                        <td id="weather-destination-wind_speed"></td>
                    </tr>
                    </tbody>
                </table>
            </div>

            <!-- Air Quality Risk Table -->
            <div class="col-md-6">
                <h2 class="text-center text-blue-600 text-xl font-semibold">Air Quality Risk</h2>
                <table class="table table-bordered text-center table-sm">
                    <thead>
                    <tr>
                        <th>Parameter</th>
                        <th>Source</th>
                        <th>Destination</th>
                    </tr>
                    </thead>
                    <tbody id="air-quality-risk-table">
                    <tr>
                        <td>PM2.5</td>
                        <td id="air-source-pm2_5"></td>
                        <td id="air-destination-pm2_5"></td>
                    </tr>
                    <tr>
                        <td>PM10</td>
                        <td id="air-source-pm10"></td>
                        <td id="air-destination-pm10"></td>
                    </tr>
                    <tr>
                        <td>O3</td>
                        <td id="air-source-o3"></td>
                        <td id="air-destination-o3"></td>
                    </tr>
                    <tr>
                        <td>NO2</td>
                        <td id="air-source-no2"></td>
                        <td id="air-destination-no2"></td>
                    </tr>
                    <tr>
                        <td>SO2</td>
                        <td id="air-source-so2"></td>
                        <td id="air-destination-so2"></td>
                    </tr>
                    <tr>
                        <td>CO</td>
                        <td id="air-source-co"></td>
                        <td id="air-destination-co"></td>
                    </tr>
                    <tr>
                        <td>NH3</td>
                        <td id="air-source-nh3"></td>
                        <td id="air-destination-nh3"></td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <div id="param-description-weather" class="mt-4 d-flex flex-column align-items-center">
        <div class="d-flex align-items-center gap-3">

            <!-- Weather Parameter Label -->
            <div class="parameter-label me-0">
                Parameters:
            </div>

            <!-- Weather Parameter -->
            <div class="me-2">
                <select id="weather-parameter" class="border rounded px-4 py-2 w-100"
                        aria-label="Select Weather Parameter">
                    <option value="temperature">Temperature</option>
                    <option value="precipitation">Precipitation</option>
                    <option value="humidity">Humidity</option>
                    <option value="wind_speed">Wind Speed</option>
                </select>
            </div>

            <!-- Air Pollution Parameter -->
            <div class="me-2">
                <select id="air-pollution-parameter" class="border rounded px-4 py-2 w-100"
                        aria-label="Select Air Quality Parameter">
                    <option value="aqi">AQI</option>
                    <option value="co">CO</option>
                    <option value="no">NO</option>
                    <option value="no2">NO₂</option>
                    <option value="o3">O₃</option>
                    <option value="so2">SO₂</option>
                    <option value="pm2_5">PM2.5</option>
                    <option value="pm10">PM10</option>
                    <option value="nh3">NH₃</option>
                </select>
            </div>

            <!-- Source Set Button -->
            <div>
                <button onclick="setParameters()" id="weather-set-parameters-button"
                        class="btn-primary-custom">
                    Set
                </button>
            </div>
        </div>
    </div>

    <div id="weather-chart"></div>

    <div id="air-pollution-chart"></div>

</div>

{% endblock %}